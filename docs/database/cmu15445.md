# CMU15445

关系型数据库: 

- 使用简单的数据结构（关系）存储数据
- DBMS实现物理存储
- 通过高级语言获得数据，DBMS决定最佳的执行策略

## 数据库存储：

​	DBMS假定主要存储在Disk上。因为磁盘是非易失的，并且成本较低且存储空间较大。

![存储结构](../img/存储结构.png)

​	由此产生的问题：磁盘上的访存速度非常慢，且随机访问的速率远小于顺序访问。

​	因此，DBMS需要解决以下问题：

- **允许DBMS管理比实际内存更大的空间**
- **减少磁盘的读写**
- **最大化顺序访问磁盘**

​	相关工作：

- mmap：[Why not mmap](https://db.cs.cmu.edu/papers/2022/cidr2022-p13-crotty.pdf)

------

​	同时，数据库往往会以多个文件的形式存储在磁盘上，一般我们通过一个页面的集合去管理这些文件。页面是固定大小的数据块，硬件页面是存储设备可以保证故障安全写入的最大数据块。由此我们会有以下问题：

- **如何确定页面的大小？**
- **对不同文件如何进行页面管理？（Heap, Tree, ISAM, Hashing）**

​	这门课中主要介绍了堆文件管理方式。堆文件是一些页面的无序集合。因此需要原数据跟踪文件中包含哪些页面以及哪些页面是空闲的。堆文件通过一个特殊的页面（页目录）跟踪数据页面的位置以及空闲的空间。

​	页面存储数据的方式：存储元组；存储日志

<center>
    ![slotted_pages](../img/slotted_pages.png)
    <br>
    <div>slotted page</div>
</center>

​	元组：按列顺序存储数据，去规范化。可以优化的点：

- **按什么顺序存储数据？**
- **trade off: 去规范化（比如两个表有个外键关联，把两张表的元组存储在一起）。这样可能可以减少I/O的总量，但是会增加修改的成本。**